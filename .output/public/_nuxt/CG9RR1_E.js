import{_ as V}from"./kWE0hwb2.js";import{k as B,a6 as R,L as T,K as $,l as x,r as m,h as d,n as E,I as M,u as D,J as q,w as h,a7 as L,a8 as U,M as H,o as i,a as n,t as o,N as J,b as K,d as _,A as O,O as P,c,y as p,T as j,q as r}from"./BGyPEWeH.js";import{_ as z}from"./DlAUqK2U.js";import"./DgM-zN9R.js";const F={class:"auth-info-text"},G={class:"auth-label"},Q=["disabled"],W={key:0},X={key:0,class:"auth-error"},Y=["disabled"],Z={key:0,class:"spinner"},ee={key:1},f=180,te=B({__name:"[username]",setup(ae){const b=R(),y=T(),e=$(),{t:k}=x(),u=m(""),a=m(f);let s=null;const l=d(()=>b.params.username),g=d(()=>L(l.value,"+998(##)###-##-##",U)),w=d(()=>e.resending),A=async()=>{try{await e.activate(l.value,u.value),await y.push("/signin")}catch(t){console.error("[Activate] Activation failed:",t)}},C=async()=>{try{await e.resendCode(l.value),a.value=f}catch(t){console.error("[Activate] Resend code failed:",t)}};return E(()=>{s=window.setInterval(()=>{a.value>0?a.value--:s&&(clearInterval(s),s=null)},1e3)}),M(()=>{s&&clearInterval(s)}),D({title:k("auth.activate")}),(t,v)=>{const I=V,N=H("maska");return i(),q(I,{title:t.$t("auth.activate")},{default:h(()=>[n("div",F,o(t.$t("auth.smsSent",{phone:g.value})),1),n("form",{class:"auth-form",onSubmit:J(A,["prevent"])},[n("label",G,[_(o(t.$t("auth.smsCode"))+" * ",1),O(n("input",{"onUpdate:modelValue":v[0]||(v[0]=S=>u.value=S),class:"auth-input",maxlength:"4",required:""},null,512),[[P,u.value],[N,"####"]])]),n("button",{type:"button",class:"auth-resend-button",disabled:w.value||a.value>0,onClick:C},[_(o(t.$t("auth.resendSms"))+" ",1),a.value?(i(),c("span",W,"("+o(a.value)+")",1)):p("",!0)],8,Q),K(j,{name:"fade"},{default:h(()=>[r(e).activateError?(i(),c("div",X,o(r(e).activateError),1)):p("",!0)]),_:1}),n("button",{type:"submit",class:"auth-button",disabled:r(e).activating||r(e).resending||u.value.length<4},[r(e).activating||r(e).resending?(i(),c("span",Z)):(i(),c("span",ee,o(t.$t("auth.activateButton")),1))],8,Y)],32)]),_:1},8,["title"])}}}),ie=z(te,[["__scopeId","data-v-13816cb4"]]);export{ie as default};
