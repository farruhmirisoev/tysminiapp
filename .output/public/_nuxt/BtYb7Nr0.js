import{_ as N}from"./COuiNp18.js";import{_ as S}from"./D5vuNWnK.js";import{k as V,L as E,M as B,l as q,r as c,u as D,E as M,w as _,N as T,o as n,a,O as I,c as d,z as m,b as f,d as w,B as b,t as l,P as k,G as U,s as z,T as g,q as o}from"./D-ONfaFs.js";import{_ as A}from"./DlAUqK2U.js";import"./DgM-zN9R.js";const L={class:"auth-label"},G=["disabled"],H={key:0,class:"auth-label"},O={class:"password-input-wrapper"},j=["type"],F={key:1,class:"auth-label"},J={class:"auth-link-wrapper"},K={key:0,class:"auth-error"},Q={key:0,class:"auth-error"},W=["disabled"],X={key:0,class:"spinner"},Y={key:1},Z=V({__name:"password-recover",setup(ee){const s=E(),C=B(),{t:R}=q(),r=c(!1),i=c("+998"),v=c(""),p=c(""),h=c(!1),P=async()=>{if(r.value)try{await s.recoverPassword(i.value.replace(/[+()-]/g,""),v.value,p.value),await C.push("/signin")}catch(e){console.error("[PasswordRecover] Recover password failed:",e)}else try{await s.sendRecoveryCode(i.value.replace(/[+()-]/g,"")),r.value=!0}catch(e){console.error("[PasswordRecover] Send recovery code failed:",e)}};return D({title:R("auth.recover")}),(e,t)=>{const $=N,x=S,y=T("maska");return n(),M(x,{title:e.$t("auth.recover")},{default:_(()=>[a("form",{class:"auth-form",onSubmit:I(P,["prevent"])},[a("label",L,[w(l(e.$t("auth.phoneNumber"))+" ",1),b(a("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),class:"auth-input",type:"tel",disabled:r.value,required:""},null,8,G),[[k,i.value],[y,"+998(##)###-##-##"]])]),r.value?(n(),d("label",H,[w(l(e.$t("auth.password"))+" ",1),a("div",O,[b(a("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>v.value=u),type:h.value?"text":"password",class:"auth-input",required:"",minlength:"6"},null,8,j),[[U,v.value]]),a("button",{type:"button",class:"password-toggle",onClick:t[2]||(t[2]=u=>h.value=!h.value)},[a("i",{class:z(["bx",h.value?"bx-hide":"bx-show"])},null,2)])])])):m("",!0),r.value?(n(),d("label",F,[w(l(e.$t("auth.confirmationCode"))+" ",1),b(a("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>p.value=u),class:"auth-input",maxlength:"4",required:""},null,512),[[k,p.value],[y,"####"]])])):m("",!0),a("div",J,[f($,{class:"auth-link",to:"/signin"},{default:_(()=>[w(l(e.$t("auth.signIn")),1)]),_:1})]),f(g,{name:"fade"},{default:_(()=>[o(s).sendRecoveryCodeError?(n(),d("div",K,l(o(s).sendRecoveryCodeError),1)):m("",!0)]),_:1}),f(g,{name:"fade"},{default:_(()=>[o(s).recoverPasswordError?(n(),d("div",Q,l(o(s).recoverPasswordError),1)):m("",!0)]),_:1}),a("button",{type:"submit",class:"auth-button",disabled:r.value?!v.value||!p.value||o(s).recoveringPassword:!i.value||o(s).sendingRecoveryCode},[o(s).sendingRecoveryCode||o(s).recoveringPassword?(n(),d("span",X)):(n(),d("span",Y,l(r.value?e.$t("auth.changePassword"):e.$t("auth.sendSms")),1))],8,W)],32)]),_:1},8,["title"])}}}),ne=A(Z,[["__scopeId","data-v-f282b9c4"]]);export{ne as default};
