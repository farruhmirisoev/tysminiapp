import{_ as S}from"./Dj_GmKHv.js";import{k as V,a7 as E,M as R,L as T,l as $,r as m,h as d,n as x,K as M,u as D,E as q,w as h,a8 as L,a9 as P,N as U,o as i,a as n,t as o,O as z,b as H,d as _,B as K,P as O,c,z as p,T as j,q as r}from"./Cw3nC2Ka.js";import{_ as F}from"./DlAUqK2U.js";import"./DgM-zN9R.js";const G={class:"auth-info-text"},J={class:"auth-label"},Q=["disabled"],W={key:0},X={key:0,class:"auth-error"},Y=["disabled"],Z={key:0,class:"spinner"},ee={key:1},f=180,te=V({__name:"[username]",setup(ae){const b=E(),k=R(),e=T(),{t:y}=$(),u=m(""),a=m(f);let s=null;const l=d(()=>b.params.username),g=d(()=>L(l.value,"+998(##)###-##-##",P)),w=d(()=>e.resending),C=async()=>{try{await e.activate(l.value,u.value),await k.push("/signin")}catch(t){console.error("[Activate] Activation failed:",t)}},A=async()=>{try{await e.resendCode(l.value),a.value=f}catch(t){console.error("[Activate] Resend code failed:",t)}};return x(()=>{s=window.setInterval(()=>{a.value>0?a.value--:s&&(clearInterval(s),s=null)},1e3)}),M(()=>{s&&clearInterval(s)}),D({title:y("auth.activate")}),(t,v)=>{const B=S,I=U("maska");return i(),q(B,{title:t.$t("auth.activate")},{default:h(()=>[n("div",G,o(t.$t("auth.smsSent",{phone:g.value})),1),n("form",{class:"auth-form",onSubmit:z(C,["prevent"])},[n("label",J,[_(o(t.$t("auth.smsCode"))+" * ",1),K(n("input",{"onUpdate:modelValue":v[0]||(v[0]=N=>u.value=N),class:"auth-input",maxlength:"4",required:""},null,512),[[O,u.value],[I,"####"]])]),n("button",{type:"button",class:"auth-resend-button",disabled:w.value||a.value>0,onClick:A},[_(o(t.$t("auth.resendSms"))+" ",1),a.value?(i(),c("span",W,"("+o(a.value)+")",1)):p("",!0)],8,Q),H(j,{name:"fade"},{default:h(()=>[r(e).activateError?(i(),c("div",X,o(r(e).activateError),1)):p("",!0)]),_:1}),n("button",{type:"submit",class:"auth-button",disabled:r(e).activating||r(e).resending||u.value.length<4},[r(e).activating||r(e).resending?(i(),c("span",Z)):(i(),c("span",ee,o(t.$t("auth.activateButton")),1))],8,Y)],32)]),_:1},8,["title"])}}}),ie=F(te,[["__scopeId","data-v-13816cb4"]]);export{ie as default};
