import{_ as N}from"./BrHlBzGw.js";import{_ as S}from"./CWEg8ffk.js";import{k as V,K as D,L as E,l as q,r as c,u as B,J as M,w as _,M as T,o as n,a,N as A,c as d,y as m,b as f,d as w,A as y,t as l,O as k,D as I,s as U,T as g,q as o}from"./Ds9BLitQ.js";import{_ as L}from"./DlAUqK2U.js";import"./DgM-zN9R.js";const z={class:"auth-label"},H=["disabled"],J={key:0,class:"auth-label"},K={class:"password-input-wrapper"},O=["type"],j={key:1,class:"auth-label"},F={class:"auth-link-wrapper"},G={key:0,class:"auth-error"},Q={key:0,class:"auth-error"},W=["disabled"],X={key:0,class:"spinner"},Y={key:1},Z=V({__name:"password-recover",setup(ee){const s=D(),C=E(),{t:R}=q(),r=c(!1),i=c("+998"),v=c(""),p=c(""),h=c(!1),P=async()=>{if(r.value)try{await s.recoverPassword(i.value.replace(/[+()-]/g,""),v.value,p.value),await C.push("/signin")}catch(e){console.error("[PasswordRecover] Recover password failed:",e)}else try{await s.sendRecoveryCode(i.value.replace(/[+()-]/g,"")),r.value=!0}catch(e){console.error("[PasswordRecover] Send recovery code failed:",e)}};return B({title:R("auth.recover")}),(e,t)=>{const $=N,x=S,b=T("maska");return n(),M(x,{title:e.$t("auth.recover")},{default:_(()=>[a("form",{class:"auth-form",onSubmit:A(P,["prevent"])},[a("label",z,[w(l(e.$t("auth.phoneNumber"))+" ",1),y(a("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),class:"auth-input",type:"tel",disabled:r.value,required:""},null,8,H),[[k,i.value],[b,"+998(##)###-##-##"]])]),r.value?(n(),d("label",J,[w(l(e.$t("auth.password"))+" ",1),a("div",K,[y(a("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>v.value=u),type:h.value?"text":"password",class:"auth-input",required:"",minlength:"6"},null,8,O),[[I,v.value]]),a("button",{type:"button",class:"password-toggle",onClick:t[2]||(t[2]=u=>h.value=!h.value)},[a("i",{class:U(["bx",h.value?"bx-hide":"bx-show"])},null,2)])])])):m("",!0),r.value?(n(),d("label",j,[w(l(e.$t("auth.confirmationCode"))+" ",1),y(a("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>p.value=u),class:"auth-input",maxlength:"4",required:""},null,512),[[k,p.value],[b,"####"]])])):m("",!0),a("div",F,[f($,{class:"auth-link",to:"/signin"},{default:_(()=>[w(l(e.$t("auth.signIn")),1)]),_:1})]),f(g,{name:"fade"},{default:_(()=>[o(s).sendRecoveryCodeError?(n(),d("div",G,l(o(s).sendRecoveryCodeError),1)):m("",!0)]),_:1}),f(g,{name:"fade"},{default:_(()=>[o(s).recoverPasswordError?(n(),d("div",Q,l(o(s).recoverPasswordError),1)):m("",!0)]),_:1}),a("button",{type:"submit",class:"auth-button",disabled:r.value?!v.value||!p.value||o(s).recoveringPassword:!i.value||o(s).sendingRecoveryCode},[o(s).sendingRecoveryCode||o(s).recoveringPassword?(n(),d("span",X)):(n(),d("span",Y,l(r.value?e.$t("auth.changePassword"):e.$t("auth.sendSms")),1))],8,W)],32)]),_:1},8,["title"])}}}),ne=L(Z,[["__scopeId","data-v-f282b9c4"]]);export{ne as default};
