@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-text font-sans antialiased;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }

    html {
        font-size: 16px;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply font-bold;
    }

    h1 {
        @apply text-2xl;
    }

    h2 {
        @apply text-xl;
    }

    h3 {
        @apply text-lg;
    }

    button {
        @apply outline-none;
    }

    input:focus,
    select:focus,
    textarea:focus {
        @apply outline-none ring-2 ring-primary ring-opacity-50;
    }

    /* Remove default input appearance on iOS */
    input[type="text"],
    input[type="tel"],
    input[type="date"],
    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }
}

@layer components {
    /* Button Styles */
    .btn {
        @apply inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
    }

    .btn-primary {
        @apply bg-primary text-white hover:bg-primary-dark active:scale-[0.98];
    }

    .btn-primary-outlined {
        @apply border-2 border-primary text-primary hover:bg-primary hover:text-white active:scale-[0.98];
    }

    .btn-secondary {
        @apply bg-secondary text-white hover:bg-secondary-dark active:scale-[0.98];
    }

    .btn-danger {
        @apply bg-error text-white hover:bg-red-600 active:scale-[0.98];
    }

    .btn-danger-outlined {
        @apply border-2 border-error text-error hover:bg-error hover:text-white active:scale-[0.98];
    }

    .btn-success {
        @apply bg-green-600 text-white hover:bg-green-700 active:scale-[0.98];
    }

    /* Input Styles */
    .input {
        @apply w-full px-4 py-3 border border-border rounded-lg bg-white text-text placeholder:text-text-lighter focus:border-primary transition-colors;
    }

    .input-error {
        @apply border-error focus:border-error focus:ring-error;
    }

    /* Card Styles */
    .card {
        @apply bg-white rounded-card shadow-card p-6;
    }

    /* Checkbox Styles */
    .checkbox {
        @apply w-5 h-5 text-primary border-border rounded focus:ring-2 focus:ring-primary focus:ring-opacity-50;
    }

    /* Label Styles */
    .label {
        @apply block text-sm font-medium text-text mb-2;
    }

    /* Error Message */
    .error-message {
        @apply text-sm text-error mt-1;
    }

    /* Helper Text */
    .helper-text {
        @apply text-sm text-text-light mt-1;
    }

    /* Spinner */
    .spinner {
        @apply animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full;
    }

    /* Link */
    .link {
        @apply text-primary hover:text-primary-dark underline transition-colors;
    }
}

@layer utilities {
    /* Fixed Layout Classes */
    .fixed-header {
        @apply fixed top-0 left-0 right-0 bg-white z-50;
        height: 140px;
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    }

    .fixed-footer {
        @apply fixed bottom-0 left-0 right-0 bg-white z-50 border-t;
        height: 70px;
        box-shadow: 0 -1px 2px 0 rgb(0 0 0 / 0.05);
        border-color: #e5e7eb;
    }

    .main-content {
        @apply px-4 mx-auto;
        padding-top: 76px;
        padding-bottom: 86px;
        max-width: 768px;
    }

    /* Transition Classes */
    .fade-enter-active,
    .fade-leave-active {
        transition: opacity 0.2s ease;
    }

    .fade-enter-from,
    .fade-leave-to {
        opacity: 0;
    }

    .slide-up-enter-active,
    .slide-up-leave-active {
        transition: all 0.3s ease;
    }

    .slide-up-enter-from {
        transform: translateY(20px);
        opacity: 0;
    }

    .slide-up-leave-to {
        transform: translateY(-20px);
        opacity: 0;
    }

    /* Touch Feedback */
    .touch-feedback {
        @apply active:bg-gray-100 transition-colors;
    }

    /* Scrollbar Hide */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Truncate Text */
    .truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .truncate-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
}

/* Custom Animations */
@keyframes pulse-soft {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
}

.pulse-soft {
    animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Loading State */
.skeleton {
    @apply animate-pulse bg-gray-200 rounded;
}

/* Premium Display Floating Badge */
.premium-badge {
    @apply fixed right-4 bottom-24 px-6 py-4 bg-primary text-white rounded-l-2xl shadow-lg z-40 animate-slide-up;
}

/* Check Button (Radio-style selector) */
.check-button {
    @apply relative flex items-center justify-center px-6 py-4 border-2 border-border rounded-lg cursor-pointer transition-all duration-200 hover:border-primary hover:bg-primary/5 active:scale-[0.98];
}

.check-button.active {
    @apply border-primary bg-primary/10 font-semibold;
}

.check-button:disabled {
    @apply opacity-50 cursor-not-allowed hover:border-border hover:bg-transparent;
}

/* Progress Bar */
.progress-bar {
    @apply relative h-2 bg-gray-200 rounded-full overflow-hidden;
}

.progress-bar-fill {
    @apply h-full bg-primary transition-all duration-300 ease-in-out rounded-full;
}

/* Step Indicator */
.step-indicator {
    @apply flex items-center justify-center w-8 h-8 rounded-full font-semibold text-sm transition-all duration-200;
}

.step-indicator.completed {
    @apply bg-primary text-white;
}

.step-indicator.active {
    @apply bg-primary text-white ring-4 ring-primary/30;
}

.step-indicator.pending {
    @apply bg-gray-200 text-text-light;
}

/* Telegram Theme Support */
:root[data-theme="dark"] {
    --color-background: #1a1a1a;
    --color-text: #ffffff;
    --color-border: #2a2a2a;
}

/* Prevent zoom on iOS */
@media screen and (max-width: 768px) {
    input[type="text"],
    input[type="tel"],
    input[type="date"],
    select,
    textarea {
        font-size: 16px;
    }
}
